# ? C?p Nh?t: Gi?i H?n Gi? Làm Vi?c Cho S? Ki?n

## ?? Tóm T?t Thay ??i

?ã c?p nh?t validation cho **MeetingTest.cs** ?? gi?i h?n th?i gian s? ki?n trong khung gi? làm vi?c chu?n.

---

## ? Quy ??nh M?i

### Khung Gi? Làm Vi?c
- **?? Gi? b?t ??u s?m nh?t:** 07:00 (7 gi? sáng)
- **?? Gi? k?t thúc mu?n nh?t:** 21:00 (9 gi? t?i)
- **?? Th?i l??ng t?i thi?u:** 15 phút
- **? Th?i l??ng t?i ?a:** 14 gi? (t? 07:00 ??n 21:00)

---

## ?? Các Tr??ng H?p Validation

### ? H?p L?
```
? 07:00 - 08:00  (1 gi?)
? 08:30 - 12:00  (3.5 gi?)
? 13:00 - 17:00  (4 gi?)
? 18:00 - 20:30  (2.5 gi?)
? 07:00 - 21:00  (14 gi? - t?i ?a)
```

### ? Không H?p L?
```
? 06:00 - 10:00  ? L?i: Gi? b?t ??u ph?i t? 07:00
? 06:30 - 08:00  ? L?i: Gi? b?t ??u ph?i t? 07:00
? 19:00 - 22:00  ? L?i: Gi? k?t thúc không ???c quá 21:00
? 20:00 - 21:30  ? L?i: Gi? k?t thúc không ???c quá 21:00
? 22:00 - 23:00  ? L?i: Gi? b?t ??u không ???c quá 21:00
? 20:00 - 20:10  ? L?i: Th?i l??ng t?i thi?u 15 phút
```

---

## ?? Thay ??i K? Thu?t

### Hàm ???c C?p Nh?t
```csharp
private bool ValidateTimeRange(string startTime, string endTime, out string errorMessage)
```

### Các ?i?u Ki?n M?i
1. **Gi? b?t ??u >= 07:00**
   ```csharp
   int minStartMinutes = 7 * 60; // 420 phút
   if (startMinutes < minStartMinutes) { ... }
   ```

2. **Gi? k?t thúc <= 21:00**
   ```csharp
   int maxEndMinutes = 21 * 60; // 1260 phút
   if (endMinutes > maxEndMinutes) { ... }
   ```

3. **Gi? b?t ??u <= 21:00**
   ```csharp
   if (startMinutes > maxEndMinutes) { ... }
   ```

4. **Th?i l??ng t?i ?a: 14 gi?**
   ```csharp
   int maxDuration = 14 * 60; // 840 phút
   if (duration > maxDuration) { ... }
   ```

---

## ?? Thông Báo L?i

### L?i 1: Gi? B?t ??u Quá S?m
```
Gi? b?t ??u ph?i t? 7:00 sáng tr? ?i!

Gi? b?t ??u hi?n t?i: 06:30
Gi? s?m nh?t cho phép: 07:00
```

### L?i 2: Gi? K?t Thúc Quá Mu?n
```
Gi? k?t thúc không ???c quá 21:00 t?i!

Gi? k?t thúc hi?n t?i: 22:00
Gi? mu?n nh?t cho phép: 21:00
```

### L?i 3: Gi? B?t ??u Quá Mu?n
```
Gi? b?t ??u không ???c quá 21:00 t?i!

Gi? b?t ??u hi?n t?i: 22:00
Khung gi? cho phép: 07:00 - 21:00
```

### L?i 4: Th?i L??ng Quá Dài
```
S? ki?n không ???c v??t quá 14 gi?!

Th?i l??ng hi?n t?i: 15 gi? 30 phút
Th?i l??ng t?i ?a: 14 gi? (07:00 - 21:00)
```

---

## ?? L?i Ích

### 1. Tuân Th? Gi? Làm Vi?c
- ? Ch? cho phép ??t l?ch trong gi? hành chính
- ? Tránh tình tr?ng h?p ngoài gi?
- ? Phù h?p v?i quy ??nh c?a t? ch?c

### 2. Qu?n Lý T?t H?n
- ? D? dàng theo dõi l?ch h?p
- ? Tránh xung ??t v?i gi? ngh? ng?i
- ? T?i ?u hóa th?i gian làm vi?c

### 3. Tr?i Nghi?m Ng??i Dùng
- ? Thông báo l?i rõ ràng
- ? H??ng d?n c? th? v? khung gi?
- ? Ng?n ch?n l?i tr??c khi l?u

---

## ?? H??ng D?n S? D?ng

### B??c 1: Ch?n Ngày
- Click vào ngày mu?n t?o s? ki?n trên l?ch

### B??c 2: Nh?p Th?i Gian
- **Gi? b?t ??u:** Nh?p t? 07:00 ??n 21:00
- **Gi? k?t thúc:** Nh?p t? 07:00 ??n 21:00
- ??m b?o gi? k?t thúc sau gi? b?t ??u

### B??c 3: X? Lý L?i (n?u có)
- ??c thông báo l?i chi ti?t
- ?i?u ch?nh th?i gian theo h??ng d?n
- Th? l?i

### B??c 4: L?u S? Ki?n
- Sau khi validation thành công
- S? ki?n s? ???c l?u vào database
- Hi?n th? trên l?ch

---

## ?? Ví D? Th?c T?

### Scenario 1: H?p Bu?i Sáng ?
```
Tiêu ??: H?p team sáng th? 2
Ngày: 15/01/2024
Gi?: 08:00 - 09:30
? H?p l? ?
```

### Scenario 2: Training C? Ngày ?
```
Tiêu ??: ?ào t?o nhân viên m?i
Ngày: 20/01/2024
Gi?: 08:00 - 17:00 (9 gi?)
? H?p l? ?
```

### Scenario 3: H?p T?i Mu?n ?
```
Tiêu ??: H?p kh?n c?p
Ngày: 18/01/2024
Gi?: 20:00 - 22:30
? L?i: Gi? k?t thúc không ???c quá 21:00 ?
? S?a thành: 20:00 - 21:00 ?
```

### Scenario 4: H?p Sáng S?m ?
```
Tiêu ??: H?p g?p
Ngày: 22/01/2024
Gi?: 06:00 - 08:00
? L?i: Gi? b?t ??u ph?i t? 07:00 ?
? S?a thành: 07:00 - 09:00 ?
```

---

## ?? Ghi Chú

1. **Không có ngo?i l?:**
   - M?i s? ki?n ??u ph?i tuân th? quy ??nh
   - Không có quy?n ??c bi?t ?? bypass validation

2. **Khuy?n ngh?:**
   - Nên ??t l?ch trong khung gi? 08:00 - 18:00
   - Tránh ??t l?ch quá sát 21:00

3. **T??ng lai:**
   - Có th? c?u hình gi? làm vi?c linh ho?t
   - Admin có th? thay ??i khung gi? m?c ??nh

---

## ?? Version History

- **v2.0** (Current) - Thêm gi?i h?n 07:00 - 21:00
- **v1.0** - Validation c? b?n (15 phút - 12 gi?)

---

**?? Ngày áp d?ng:** Ngay l?p t?c  
**?? Áp d?ng cho:** T?t c? ng??i dùng  
**?? File thay ??i:** MeetingTest.cs, frmAddEditEvent.cs (n?u có)
